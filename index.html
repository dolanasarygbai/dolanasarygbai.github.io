<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=yes">
    <title>–°–µ–º–µ–π–Ω–æ–µ –¥—Ä–µ–≤–æ ¬∑ –†–æ–¥ –°–∞–Ω—á–∞—Ç</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Roboto', Arial, sans-serif;
        }

        body {
            background: #f4ebe2; /* —Ü–≤–µ—Ç —Å—Ç–∞—Ä–æ–π –±—É–º–∞–≥–∏ */
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äî –¥—Ä–µ–≤–æ–≤–∏–¥–Ω–∞—è —Å—Ö–µ–º–∞ + –±–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å */
        .tree-container {
            display: flex;
            width: 100%;
            max-width: 1600px;
            height: 95vh;
            background: #fffaf2;
            border-radius: 32px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15), 0 4px 12px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            backdrop-filter: blur(2px);
            border: 1px solid rgba(200, 170, 140, 0.3);
        }

        /* –õ–µ–≤–∞—è/–æ—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç—å ‚Äî —Å–∫—Ä–æ–ª–ª–∏—Ä—É–µ–º–æ–µ –¥–µ—Ä–µ–≤–æ */
        .tree-canvas {
            flex: 3;
            overflow: auto;
            padding: 30px 20px;
            background: #fdf9f3;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(210, 180, 140, 0.08) 0%, transparent 25%),
                radial-gradient(circle at 80% 70%, rgba(160, 120, 90, 0.05) 0%, transparent 30%);
            scroll-behavior: smooth;
        }

        /* –°–µ—Ç–∫–∞ –ø–æ–∫–æ–ª–µ–Ω–∏–π ‚Äî flex-—Ä—è–¥—ã */
        .generation-row {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 60px;
            margin: 30px 0;
            position: relative;
            flex-wrap: wrap;
        }

        /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ–∫–æ–ª–µ–Ω–∏—è (–º–µ—Ç–∫–∞ —Å–ª–µ–≤–∞) */
        .gen-label {
            position: sticky;
            left: 0;
            background: #d8c8b8;
            color: #3d2e22;
            font-weight: 600;
            font-size: 0.8rem;
            padding: 6px 14px;
            border-radius: 40px;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            text-transform: uppercase;
            z-index: 5;
            backdrop-filter: blur(4px);
        }

        /* –£–∑–ª—ã (–∫–∞—Ä—Ç–æ—á–∫–∏ –ª—é–¥–µ–π) */
        .person-node {
            background: white;
            border-radius: 20px;
            padding: 12px 16px;
            min-width: 160px;
            max-width: 200px;
            box-shadow: 0 8px 18px -6px rgba(90, 60, 40, 0.2), 0 0 0 1px rgba(170, 140, 110, 0.3);
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
            position: relative;
            z-index: 2;
            word-break: break-word;
        }

        .person-node:hover {
            transform: translateY(-4px);
            box-shadow: 0 18px 24px -10px #9b7b5e;
            border-color: #b48b5a;
        }

        /* –í—ã–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ (–∞–∫—Ç–∏–≤–Ω—ã–π) */
        .person-node.active {
            border-color: #d4a017;
            background: #fff3d6;
            box-shadow: 0 0 0 3px rgba(212, 160, 23, 0.3);
        }

        /* –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –ø—Ä–µ–¥–∫–æ–≤ –∏ –ø–æ—Ç–æ–º–∫–æ–≤ */
        .person-node.highlight-ancestor {
            border-color: #2b7a4b;
            background: #e2f0e6;
            box-shadow: 0 0 0 2px #2b7a4b88;
        }

        .person-node.highlight-descendant {
            border-color: #1f6d9f;
            background: #d9eaf5;
            box-shadow: 0 0 0 2px #1f6d9f88;
        }

        .person-name {
            font-weight: 700;
            font-size: 1.1rem;
            color: #2d1f13;
        }

        .person-years {
            font-size: 0.8rem;
            color: #6f5a48;
            margin: 4px 0 2px;
        }

        .person-relation {
            font-size: 0.75rem;
            background: #ece2d8;
            display: inline-block;
            padding: 2px 8px;
            border-radius: 30px;
            color: #4e3e2e;
        }

        .photo-placeholder {
            width: 40px;
            height: 40px;
            background: #cdbba8;
            border-radius: 50%;
            margin-right: 12px;
            float: left;
            shape-outside: circle();
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%238d6e52"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>');
            background-size: 60%;
            background-position: center 55%;
            background-repeat: no-repeat;
            background-color: #e0cfbf;
        }

        /* –õ–∏–Ω–∏–∏-—Å–≤—è–∑–∏ —Ä–∏—Å—É–µ–º —á–µ—Ä–µ–∑ –ø—Å–µ–≤–¥–æ—ç–ª–µ–º–µ–Ω—Ç—ã –∏ –∞–±—Å–æ–ª—é—Ç–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ,
           –Ω–æ –ø—Ä–æ—â–µ –¥–æ–≤–µ—Ä–∏—Ç—å—Å—è –æ—Ç—Å—Ç—É–ø–∞–º –∏ –Ω–∞–ø—Ä–∞–≤–ª—è—é—â–∏–º. –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –ª–∏–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ–º border/—Å—Ç—Ä–µ–ª–∫–∏ */
        .edge-marker {
            display: flex;
            justify-content: center;
            margin: -15px 0 -10px;
            color: #9b8470;
            font-size: 20px;
        }

        .edge-marker span {
            background: #e7d9cc;
            width: 40px;
            height: 2px;
            display: block;
        }

        /* –ø—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è */
        .info-panel {
            flex: 1;
            min-width: 260px;
            background: #f2e5d9;
            border-left: 1px solid #dacbbd;
            padding: 25px 18px;
            overflow-y: auto;
            box-shadow: -6px 0 15px -8px rgba(0,0,0,0.2);
        }

        .info-panel h3 {
            font-family: 'Merriweather', Georgia, serif;
            font-size: 1.7rem;
            font-weight: 400;
            color: #3d2e1f;
            border-bottom: 2px dotted #baa086;
            padding-bottom: 12px;
            margin-bottom: 20px;
        }

        .info-card {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .info-photo {
            width: 100%;
            height: 180px;
            background: #d2c0ae;
            border-radius: 24px;
            margin-bottom: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #7a624b;
            font-size: 1rem;
            border: 2px dashed #aa8b70;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23927760"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/></svg>');
            background-size: 70px;
            background-repeat: no-repeat;
            background-position: center;
        }

        .info-field {
            background: white;
            border-radius: 16px;
            padding: 12px 16px;
            box-shadow: 0 2px 6px #e5d5c5;
            font-size: 0.95rem;
            line-height: 1.5;
            border-left: 4px solid #b48b5a;
        }

        .info-field strong {
            color: #7b4e2b;
            display: block;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.4px;
        }

        /* –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 800px) {
            .tree-container {
                flex-direction: column;
                height: auto;
                max-height: 98vh;
            }
            .info-panel {
                border-left: none;
                border-top: 1px solid #dacbbd;
                max-height: 40vh;
            }
            .generation-row {
                gap: 20px;
                justify-content: flex-start;
                flex-wrap: nowrap;
                overflow-x: auto;
                padding-bottom: 20px;
            }
            .person-node {
                min-width: 140px;
            }
        }
    </style>
</head>
<body>
<div class="tree-container" id="treeContainer">
    <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –¥—Ä–µ–≤–æ -->
    <div class="tree-canvas" id="treeCanvas">
        <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –±—É–¥–µ—Ç —Å—Ç—Ä–æ–∏—Ç—å—Å—è JS, –Ω–æ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –≤ –≤–µ—Ä—Å—Ç–∫–µ —Å–æ–∑–¥–∞–¥–∏–º —Å–∫–µ–ª–µ—Ç,
             –∞ –ª—é–¥–µ–π –¥–æ–±–∞–≤–∏–º –∫–æ–¥–æ–º. –ù–æ –º–æ–∂–Ω–æ –∏ —Å—Ä–∞–∑—É —Ä–∞–∑–º–µ—Ç–∏—Ç—å ‚Äî —Ç–æ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω–∏–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É. 
             –õ—É—á—à–µ –ø–æ—Å—Ç—Ä–æ–∏–º –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑ JS, —á—Ç–æ–±—ã —Å–≤—è–∑–∏ –ø—Ä–æ—â–µ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—Ç—å -->
    </div>

    <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π -->
    <div class="info-panel" id="infoPanel">
        <h3>üå≥ –°–µ–º—å—è</h3>
        <div id="personInfo" class="info-card">
            <div class="info-photo" id="infoPhotoPlace">üñºÔ∏è –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —á–µ–ª–æ–≤–µ–∫–∞</div>
            <div class="info-field"><strong>–ò–º—è</strong>‚Äî</div>
            <div class="info-field"><strong>–ì–æ–¥—ã –∂–∏–∑–Ω–∏</strong>‚Äî</div>
            <div class="info-field"><strong>–†–æ–¥–∏—Ç–µ–ª–∏</strong>‚Äî</div>
            <div class="info-field"><strong>–°–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤–æ / –∑–∞–ø–∏—Å—å</strong>‚Äî</div>
        </div>
    </div>
</div>

<script>
    (function() {
        // ==================== –î–ê–ù–ù–´–ï ====================
        const people = [
            // 1 –ü–û–ö–û–õ–ï–ù–ò–ï (–ü—Ä–∞—Ä–æ–¥–∏—Ç–µ–ª–∏ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –æ—Ç—Ü–∞)
            { id: 'p1', name: '–ß–æ–æ–¥—É –Ø–∞—Ä –°—É–ª–µ–ø–µ–π (–î–∞–Ω–¥–∞—Ä)', gender: '–º', birth: '', description: '–ü—Ä–∞–¥–µ–¥—É—à–∫–∞ (–æ—Ç–µ—Ü –±–∞–±—É—à–∫–∏ –ø–æ –æ—Ç—Ü—É)', motherId: null, fatherId: null, generation: 1, info: { doc: '', details: '–ü—Ä–∞–¥–µ–¥ –ø–æ –ª–∏–Ω–∏–∏ –æ—Ç—Ü–∞' } },
            { id: 'p2', name: '–ß–æ–æ–¥—É –°–µ–≤–∏–ª –ë–∞–ª—á—ã–º–∞', gender: '–∂', birth: '', description: '–ü—Ä–∞–±–∞–±—É—à–∫–∞ (–º–∞—Ç—å –±–∞–±—É—à–∫–∏ –ø–æ –æ—Ç—Ü—É)', motherId: null, fatherId: null, generation: 1, info: { doc: '' } },

            // 1 –ü–û–ö–û–õ–ï–ù–ò–ï (–ü—Ä–∞—Ä–æ–¥–∏—Ç–µ–ª–∏ –¥–µ–¥–∞ –ø–æ –æ—Ç—Ü—É)
            { id: 'p3', name: '–ß–æ–æ–¥—É –ß–∏–≥–∂–∏—Ç –ß–∞–º–±–∞–ª', gender: '–º', birth: '', description: '–ü—Ä–∞–¥–µ–¥—É—à–∫–∞ (–æ—Ç–µ—Ü –¥–µ–¥–∞)', motherId: null, fatherId: null, generation: 1, info: {} },
            { id: 'p4', name: '–ß–æ–æ–¥—É –°–µ–¥–∏–ø –°–∞–≥–∞–∞–Ω', gender: '–∂', birth: '', description: '–ü—Ä–∞–±–∞–±—É—à–∫–∞ (–º–∞—Ç—å –¥–µ–¥–∞)', motherId: null, fatherId: null, generation: 1, info: {} },

            // 1 –ü–û–ö–û–õ–ï–ù–ò–ï (–ü—Ä–µ–¥–∫–∏ –º–∞—Ç–µ—Ä–∏ ‚Äî —Ä–æ–¥–∏—Ç–µ–ª–∏ –æ—Ç—Ü–∞ –º–∞—Ç–µ—Ä–∏)
            { id: 'p5', name: '–ß–æ–æ–¥—É –î–∞–Ω–∑—ã–Ω –ß–∏–≥–∂–∏—Ç', gender: '–º', birth: '', description: '–û—Ç–µ—Ü –æ—Ç—Ü–∞ –º–∞—Ç–µ—Ä–∏', motherId: null, fatherId: null, generation: 1, info: {} },
            { id: 'p6', name: '–ß–æ–æ–¥—É –î–æ–ª–∑–∞—Ç –ß–∞–º—ã—è“£', gender: '–∂', birth: '', description: '–ú–∞—Ç—å –æ—Ç—Ü–∞ –º–∞—Ç–µ—Ä–∏', motherId: null, fatherId: null, generation: 1, info: {} },

            // 2 –ü–û–ö–û–õ–ï–ù–ò–ï (–ë–∞–±—É—à–∫–∏ –∏ –¥–µ–¥—É—à–∫–∏)
            { id: 'g1', name: '–î–æ–ø—É—É –î–æ–∑—É–º', gender: '–∂', birth: '03.08.1894', description: '–ë–∞–±—É—à–∫–∞ –ø–æ –æ—Ç—Ü—É (–º–∞—Ç—å –æ—Ç—Ü–∞)', motherId: 'p2', fatherId: 'p1', generation: 2, info: { birthplace: '“Æ-–®—ã–Ω–∞–∞, –∞—Ä–±–∞–Ω ‚Ññ2', doc: '–°–≤-–≤–æ –†–≠ ‚Ññ101142, –∑–∞–ø–∏—Å—å 20.09.1945 ‚Ññ144, –∫–Ω.1, —Å—Ç—Ä.503', parents: '–ß–æ–æ–¥—É –Ø–∞—Ä –°—É–ª–µ–ø–µ–π, –ß–æ–æ–¥—É –°–µ–≤–∏–ª –ë–∞–ª—á—ã–º–∞' } },
            { id: 'g2', name: '–ù–∞—á—ã–Ω –ú”©“£–∫–µ', gender: '–º', birth: '18.09.1890', description: '–î–µ–¥—É—à–∫–∞ –ø–æ –æ—Ç—Ü—É (–æ—Ç–µ—Ü –æ—Ç—Ü–∞)', motherId: 'p4', fatherId: 'p3', generation: 2, info: { birthplace: '“Æ-–®—ã–Ω–∞–∞, –∞—Ä–±–∞–Ω ‚Ññ2', doc: '–†–≠ 101141, 20.09.1945', parents: '–ß–æ–æ–¥—É –ß–∏–≥–∂–∏—Ç –ß–∞–º–±–∞–ª, –ß–æ–æ–¥—É –°–µ–¥–∏–ø –°–∞–≥–∞–∞–Ω' } },
            { id: 'g3', name: '–î–æ–ª–≥–∞—Ä –°–∏—Ä–∂–∏–º', gender: '–∂', birth: '10.05.1899', description: '–°–µ—Å—Ç—Ä–∞ –º–∞—Ç–µ—Ä–∏ –æ—Ç—Ü–∞', motherId: 'p2', fatherId: 'p1', generation: 2, info: { birthplace: '“Æ-–®—ã–Ω–∞–∞, –∞—Ä–±–∞–Ω ‚Ññ2', doc: '–†–≠ ‚Ññ111810, 22.09.1945' } },
            // –ø—Ä–∞–±–∞–±—É—à–∫–∞/–ø—Ä–∞–¥–µ–¥ –ø–æ –º–∞—Ç–µ—Ä–∏ ‚Äî –ø–æ–∫–æ–ª–µ–Ω–∏–µ 2? –ù–µ—Ç, —Ä–æ–¥–∏—Ç–µ–ª–∏ –º–∞—Ç–µ—Ä–∏ (–ê–∂—ã–∫–∫–∞–π –∏ –î–µ–º—á–∏–∫–∫–µ–π) ‚Äî —ç—Ç–æ –≤—Ç–æ—Ä–æ–µ –ø–æ–∫–æ–ª–µ–Ω–∏–µ –¥–ª—è –º–µ–Ω—è.
            { id: 'g4', name: '–ß–æ–æ–¥—É –ê–∂—ã–∫–∫–∞–π –£–∑—É–Ω –∞—à–∞–∫ —É—Ä—É—É', gender: '–∂', birth: '~1888', description: '–ú–∞—Ç—å –º–∞—Ç–µ—Ä–∏ (–±–∞–±—É—à–∫–∞ –ø–æ –º–∞—Ç–µ—Ä–∏)', motherId: null, fatherId: null, generation: 2, info: { birthplace: '“Æ-–®—ã–Ω–∞–∞', doc: '1945: 57 –ª–µ—Ç' } },
            { id: 'g5', name: '–ß–æ–æ–¥—É –î–µ–º—á–∏–∫–∫–µ–π –î–∞–Ω–∑—ã–Ω (–¢–µ–º—á–∏–∫–µ–π –ß–∞–≤–∞–∞)', gender: '–º', birth: '15.09.1889', description: '–û—Ç–µ—Ü –º–∞—Ç–µ—Ä–∏ (–¥–µ–¥—É—à–∫–∞ –ø–æ –º–∞—Ç–µ—Ä–∏)', motherId: 'p6', fatherId: 'p5', generation: 2, info: { birthplace: '“Æ-–®—ã–Ω–∞–∞', occupation: '–º–∞–ª, —Ç–∞—Ä–∞–∞ –∞–∂—ã–ª—ã, –ú–ß–ê–≠ –∫–µ–∂–∏–≥“Ø“Ø–Ω“Ø', doc: '–≤ 1945 - 59 –ª–µ—Ç' } },

            // 3 –ü–û–ö–û–õ–ï–ù–ò–ï (—Ä–æ–¥–∏—Ç–µ–ª–∏, –∏—Ö –±—Ä–∞—Ç—å—è –∏ —Å–µ—Å—Ç—Ä—ã ‚Äî –ø–æ –æ—Ç—Ü—É –∏ –º–∞—Ç–µ—Ä–∏)
            { id: 'f1', name: '–°–∞–Ω—á–∞—Ç –°–∞–Ω–¥–∞–Ω –ù–∞—á—ã–Ω–æ–≤–∏—á', gender: '–º', birth: '01.08.1920', description: '–û—Ç–µ—Ü', motherId: 'g1', fatherId: 'g2', generation: 3, info: { birthplace: '“Æ-–®—ã–Ω–∞–∞, –∞—Ä–±–∞–Ω ‚Ññ2', doc: '–†–≠‚Ññ101228, 18.09.1945 ‚Ññ65', parents: '–ß–æ–æ–¥—É –ù–∞—á—ã–Ω –ß–∏–≥–∂–∏—Ç, –ß–æ–æ–¥—É –î–æ–ø—É—É –°–∞–Ω–∞–∞', work: '–ú–ß–ê–≠ 10 –¥—É–≥–∞–∞—Ä' } },
            { id: 'f2', name: '–°–∞–Ω—á–∞—Ç –û–∫–∞—à—Ç–∞–π –î–µ–º—á–∏–∫–µ–π–æ–≤–Ω–∞ (–ß–æ–æ–¥—É –û–∫–∫–∞—à—Ç–∞–π)', gender: '–∂', birth: '01.03.1920', description: '–ú–∞—Ç—å', motherId: 'g4', fatherId: 'g5', generation: 3, info: { birthplace: '“Æ-–®—ã–Ω–∞–∞', maiden: '–ß–æ–æ–¥—É', doc: '–¥–µ–≤–∏—á—å—è –ß–æ–æ–¥—É –û–∫–∫–∞—à—Ç–∞–π –î–µ–º—á–∏–∫–∫–µ–π' } },
            // –±—Ä–∞—Ç—å—è/—Å–µ—Å—Ç—Ä—ã –æ—Ç—Ü–∞
            { id: 'u1', name: '–°–∞–º–¥–∞–Ω (—Å—Ç–∞—Ä—à–∏–π –±—Ä–∞—Ç –æ—Ç—Ü–∞)', gender: '–º', birth: '‚Äî', description: '–ë—Ä–∞—Ç –æ—Ç—Ü–∞', motherId: 'g1', fatherId: 'g2', generation: 3, info: { note: '–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —É—Ç–æ—á–Ω—è–µ—Ç—Å—è' } },
            { id: 'u2', name: '–ß–æ–æ–¥—É –ú–∞–Ω—á–∞–ª–º–∞–∞', gender: '–∂', birth: '10.09.1918', description: '–°–µ—Å—Ç—Ä–∞ –æ—Ç—Ü–∞', motherId: 'g1', fatherId: 'g2', generation: 3, info: { doc: '–†–≠ ‚Ññ101257, 18.09.1945', birthplace: '“Æ-–®—ã–Ω–∞–∞, –∞—Ä–±–∞–Ω ‚Ññ2', parents: '–ß–æ–æ–¥—É –ù–∞—á—ã–Ω –ß–∏–≥–∂–∏—Ç, –ß–æ–æ–¥—É –î–æ–ø–ø—É—É –•–∞–º –ß–∞–ª–∞“£', work: '"–û–Ω –¥—É–≥–∞–∞—Ä" –ú–ß–ê–≠–¥–µ' } },
            { id: 'u3', name: '–ú–æ–Ω–≥–∞–ª –ú–∞–π–¥—ã—Ä', gender: '–º', birth: '12.02.1916', description: '–ú—É–∂ –ú–∞–Ω—á–∞–ª–º–∞–∞', motherId: null, fatherId: null, generation: 3, info: { doc: '–†–≠ ‚Ññ101258', parents: '–ß–æ–æ–¥—É –ß–∞–ø—á—ã–π-–æ–æ–ª –°–æ–ª–∞–∞–Ω, –ß–æ–æ–¥—É –ß–∏–∂–æ–π –ù–æ—Ä–¥—É–ø–ø–∞–π', work: '"–û–Ω –¥—É–≥–∞–∞—Ä" –ú–ß–ê–≠–¥–µ', birthplace: '“Æ-–®—ã–Ω–∞–∞, –∞—Ä–±–∞–Ω ‚Ññ2' } },
            { id: 'u4', name: '–ù–∞—á—ã–Ω –°–∞“£–¥–∞–ª', gender: '–º', birth: '15.02.1924', description: '–ú–ª–∞–¥—à–∏–π –±—Ä–∞—Ç –æ—Ç—Ü–∞', motherId: 'g1', fatherId: 'g2', generation: 3, info: { doc: '–†–≠‚Ññ101228, –†–≠ 101172, –∑–∞–ø–∏—Å—å ‚Ññ124 19.09.1945', work: '–ú–ß–ê–≠–¥–µ 10 –¥—É–≥–∞–∞—Ä', birthplace: '“Æ-–®—ã–Ω–∞–∞, –∞—Ä–±–∞–Ω ‚Ññ2' } },
            { id: 'u5', name: '–¢—ã–≤–∞–∞ –¢–æ—Ä–∂—É (–°–∞–Ω—á–∞—Ç)', gender: '–º', birth: '01.05.1930', description: '–ú–ª–∞–¥—à–∏–π –±—Ä–∞—Ç –æ—Ç—Ü–∞ (–≤–æ—Å–ø–∏—Ç–∞–Ω–Ω–∏–∫)', motherId: 'g1', fatherId: 'g2', generation: 3, info: { doc: '–†–≠ ‚Ññ138002, –∑–∞–ø–∏—Å—å ‚Ññ400 14.01.1946', birthplace: '“Æ-–®—ã–Ω–∞–∞, –∞—Ä–±–∞–Ω 2' } },
            { id: 'u6', name: '–î”©–º“Ø—Ä-–æ–æ–ª –°–∞“£–º–∞–∞', gender: '–∂', birth: '31.08.1931', description: '–°–µ—Å—Ç—Ä–∞ –æ—Ç—Ü–∞', motherId: null, fatherId: null, generation: 3, info: { doc: '–†–≠ ‚Ññ111808', parents: '–î”©–º“Ø—Ä-–æ–æ–ª –ë–∞—Ä–∑–∞ ”®—Ä—Ç—ç—ç, –î”©–º“Ø—Ä-–æ–æ–ª –°“Ø—Ä–∂–∏–∏ –Ø–∞—Ä', birthplace: '“Æ-–®—ã–Ω–∞–∞, –∞—Ä–±–∞–Ω 1' } },
            { id: 'u7', name: '–ù–∞—á—ã–Ω –ß–∞–≥–∞—Ä–º–∞–∞', gender: '–∂', birth: '23.08.1936', description: '–ú–ª–∞–¥—à–∞—è —Å–µ—Å—Ç—Ä–∞ –æ—Ç—Ü–∞', motherId: 'g1', fatherId: 'g2', generation: 3, info: { doc: '–†–≠ ‚Ññ101139, –∑–∞–ø–∏—Å—å 145, 20.09.1945', parents: '–ù–∞—á—ã–Ω –ú”©“£–∫–µ –ß–∏–≥–∂–∏—Ç, –ù–∞—á—ã–Ω –î–æ–∑—É–º –Ø–∞—Ä', birthplace: '“Æ-–®—ã–Ω–∞–∞, –∞—Ä–±–∞–Ω 2' } },
            { id: 'u8', name: '–®–∏–ª–∏–º–∞–∞ (—Å–µ—Å—Ç—Ä–∞ –æ—Ç—Ü–∞)', gender: '–∂', birth: '‚Äî', description: '–ú–ª–∞–¥—à–∞—è —Å–µ—Å—Ç—Ä–∞ –æ—Ç—Ü–∞', motherId: 'g1', fatherId: 'g2', generation: 3, info: { note: '–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ–∑–∂–µ' } },
            { id: 'u9', name: '–°—É–ª–¥—É–º (–±—Ä–∞—Ç –æ—Ç—Ü–∞)', gender: '–º', birth: '‚Äî', description: '–ë—Ä–∞—Ç –æ—Ç—Ü–∞', motherId: 'g1', fatherId: 'g2', generation: 3, info: { note: '–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ–∑–∂–µ' } },
            // –±—Ä–∞—Ç—å—è –∏ —Å–µ—Å—Ç—Ä—ã –º–∞—Ç–µ—Ä–∏
            { id: 'm1', name: '–°–∞–∞–¥–∞–∫ –ê—Å—Ç—ã—Ä', gender: '–º', birth: '05.07.1904', description: '–°—Ç–∞—Ä—à–∏–π –±—Ä–∞—Ç –º–∞—Ç–µ—Ä–∏', motherId: 'g4', fatherId: 'g5', generation: 3, info: { note: '–∑–∞–ø–∏—Å—å 1945: –æ—Ç–µ—Ü –ß–æ–æ–¥—É –î”©–º“Ø—Ä-–æ–æ–ª ”®—Ä—à—ç—ç 62–≥, –º–∞—Ç—å –ß–æ–æ–¥—É –ê–∂—ã–∫–∫–∞–π –¢—ã–≤–∞–∞–Ω —É–º–µ—Ä—à–∞—è' } },
            { id: 'm2', name: '–ê–π—ã—ã—Ä –î“Ø—à–±“Ø–Ω', gender: '–º', birth: '01.09.1909', description: '–°—Ç–∞—Ä—à–∏–π –±—Ä–∞—Ç –º–∞—Ç–µ—Ä–∏', motherId: 'g4', fatherId: 'g5', generation: 3, info: { note: '–æ—Ç–µ—Ü –®–∞–ª—ã–∫ –ê–π—ã—ã—Ä –ë–∞—Ä–∑—ã“£–∞–π, –º–∞—Ç—å –®–∞–ª—ã–∫ –¢—ã—ã–¥—ã–π –ß–∞–º—ã–π–∞–Ω (–≤–æ—Å–ø–∏—Ç–∞–Ω–∏–µ)' } },
            { id: 'm3', name: '–î–∞–ø—ã–π-–æ–æ–ª –ù–∏–∫–æ–ª–∞–π', gender: '–º', birth: '10.04.1915', description: '–°—Ç–∞—Ä—à–∏–π –±—Ä–∞—Ç –º–∞—Ç–µ—Ä–∏', motherId: 'g4', fatherId: 'g5', generation: 3, info: { doc: '–†–≠ ‚Ññ111033, –ø–∞—Ä—Ç–±–∏–ª–µ—Ç 7900107' } },
            { id: 'm4', name: '–ß–æ–æ–¥—É –î—É“£–º–∞–π', gender: '–∂', birth: '15.03.1917', description: '–°—Ç–∞—Ä—à–∞—è —Å–µ—Å—Ç—Ä–∞ –º–∞—Ç–µ—Ä–∏', motherId: 'g4', fatherId: 'g5', generation: 3, info: {} },
            { id: 'm5', name: '–î–∏–∏–º–∞–∞ –ß–æ–æ–¥—É', gender: '–∂', birth: '08.03.1922', description: '–ú–ª–∞–¥—à–∞—è —Å–µ—Å—Ç—Ä–∞ –º–∞—Ç–µ—Ä–∏', motherId: 'g4', fatherId: 'g5', generation: 3, info: { doc: '–†–≠ ‚Ññ111195, –∫–Ω–∏–≥–∞ ‚Ññ1 17.09.1945 –∑–∞–ø–∏—Å—å184, –∫–æ–º—Å–æ–º–æ–ª–∫–∞' } },
            { id: 'm6', name: '–•—É—É—Ä–∞–∫-–æ–æ–ª –ß–æ–æ–¥—É', gender: '–º', birth: '15.01.1923', description: '–ú–ª–∞–¥—à–∏–π –±—Ä–∞—Ç –º–∞—Ç–µ—Ä–∏', motherId: 'g4', fatherId: 'g5', generation: 3, info: { doc: '–†–≠ ‚Ññ101140, –∫–æ–º—Å.–±–∏–ª–µ—Ç2282416, –∑–∞–ø–∏—Å—å ‚Ññ99,17.09.1945' } },
            { id: 'm7', name: '–ß–∞–∂—ã–ª–º–∞–∞ –ï–ª–∏–∑–∞–≤–µ—Ç–∞ / –î–µ–º—á–∏–∫–µ–π –ß–∞–∂–∞–ª–º–∞–∞', gender: '–∂', birth: '03.07.1929 / 15.08.1929', description: '–ú–ª–∞–¥—à–∞—è —Å–µ—Å—Ç—Ä–∞ –º–∞—Ç–µ—Ä–∏', motherId: 'g4', fatherId: 'g5', generation: 3, info: { doc: '–†–≠ ‚Ññ111041, –∫–æ–º—Å., —Ç–∞–∫–∂–µ –†–≠101180' } },
            { id: 'm8', name: '–î–µ–º—á–∏–∫–∫–µ–π –û–Ω–µ—Ä–º–∞–∞', gender: '–∂', birth: '01.01.1936', description: '–ú–ª–∞–¥—à–∞—è —Å–µ—Å—Ç—Ä–∞ –º–∞—Ç–µ—Ä–∏', motherId: 'g4', fatherId: 'g5', generation: 3, info: { doc: '–†–≠ ‚Ññ101078, –∑–∞–ø–∏—Å—å130' } },

            // 4 –ü–û–ö–û–õ–ï–ù–ò–ï (–Ø –∏ –º–æ–∏ –±—Ä–∞—Ç—å—è/—Å–µ—Å—Ç—Ä—ã, –∞ —Ç–∞–∫–∂–µ –¥–µ—Ç–∏ –±—Ä–∞—Ç—å–µ–≤/—Å–µ—Å—Ç–µ—Ä –æ—Ç—Ü–∞)
            { id: 'me1', name: '–°–∞–Ω—á–∞—Ç –í–∏–∫—Ç–æ—Ä –ù–∞—á—ã–Ω–æ–≤–∏—á', gender: '–º', birth: '22.08.1939', description: '–°—Ç–∞—Ä—à–∏–π –±—Ä–∞—Ç', motherId: 'f2', fatherId: 'f1', generation: 4, info: { birthplace: '–°–∞–º–∞–≥–∞–ª—Ç–∞–π', education: '–ù–∞—á–∞–ª—å–Ω–æ–µ, —Å—Ä–µ–¥.—Å–ø–µ—Ü', work: '–í–∞–ª—å—â–∏–∫ –ª–µ—Å–∞, –ª–µ—Å–Ω–∏–∫' } },
            { id: 'me2', name: '–°–∞–Ω—á–∞—Ç-–æ–æ–ª –°—É–∫—Ç–∞—Ä-–æ–æ–ª –°–∞–Ω–¥–∞–Ω–æ–≤–∏—á', gender: '–º', birth: '14.09.1944', description: '–ë—Ä–∞—Ç', motherId: 'f2', fatherId: 'f1', generation: 4, info: { birthplace: '–°–∞–º–∞–≥–∞–ª—Ç–∞–π', education: '–°—Ä–µ–¥.—Å–ø–µ—Ü –∏–Ω–∂–µ–Ω–µ—Ä-–º–µ—Ö–∞–Ω–∏–∫', work: '–ú–µ—Ö–∞–Ω–∏–∫ –ª–µ—Å—Ö–æ–∑–∞' } },
            { id: 'me3', name: '–°–∞–Ω—á–∞—Ç –ë–æ–ª–∞—Ç-–æ–æ–ª –°–∞–Ω–¥–∞–Ω–æ–≤–∏—á', gender: '–º', birth: '25.05.1947', description: '–ë—Ä–∞—Ç', motherId: 'f2', fatherId: 'f1', generation: 4, info: { work: '–®–æ—Ñ–µ—Ä —Ä–∞–π–ø–æ' } },
            { id: 'me4', name: '–°–∞–Ω—á–∞—Ç –ö–∞–Ω-–æ–æ–ª –°–∞–Ω–¥–∞–Ω–æ–≤–∏—á', gender: '–º', birth: '19.10.1949', description: '–ë—Ä–∞—Ç', motherId: 'f2', fatherId: 'f1', generation: 4, info: { work: '–õ–µ—Å–Ω–∏–∫' } },
            { id: 'me5', name: '–°–∞–Ω—á–∞—Ç (–ë–∞–π—ã—Ä-–æ–æ–ª) –í–∞–ª–µ–Ω—Ç–∏–Ω–∞ –°–∞–Ω–¥–∞–Ω–æ–≤–Ω–∞', gender: '–∂', birth: '25.08.1951', description: '–°–µ—Å—Ç—Ä–∞', motherId: 'f2', fatherId: 'f1', generation: 4, info: { work: '–±—É—Ö–≥–∞–ª—Ç–µ—Ä' } },
            { id: 'me6', name: '–°–∞–Ω—á–∞—Ç –ë–æ—Ä–∏—Å –°–∞–Ω–¥–∞–Ω–æ–≤–∏—á', gender: '–º', birth: '05.10.1953', description: '–ë—Ä–∞—Ç', motherId: 'f2', fatherId: 'f1', generation: 4, info: { work: '–†–∞–±–æ—á–∏–π' } },
            { id: 'me7', name: '–°–∞–Ω—á–∞—Ç –í–ª–∞–¥–∏–º–∏—Ä –°–∞–Ω–¥–∞–Ω–æ–≤–∏—á', gender: '–º', birth: '12.02.1956', description: '–ë—Ä–∞—Ç', motherId: 'f2', fatherId: 'f1', generation: 4, info: { work: '–ú–∞—Å—Ç–µ—Ä —Ä–∞–π–≥–∞–∑–∞' } },
            { id: 'me8', name: '–°–∞–Ω—á–∞—Ç –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –°–∞–Ω–¥–∞–Ω–æ–≤–∏—á (–Ø)', gender: '–º', birth: '06.06.1959', description: '–í—ã', motherId: 'f2', fatherId: 'f1', generation: 4, info: { education: '–ö–§–ö–ü–ò, –†–ê–ì–°', work: '–ò–Ω–∂–µ–Ω–µ—Ä-—Å—Ç—Ä–æ–∏—Ç–µ–ª—å, –º–µ–Ω–µ–¥–∂–µ—Ä-—ç–∫–æ–Ω–æ–º–∏—Å—Ç' } },
            { id: 'me9', name: '–°–∞–Ω—á–∞—Ç –ê–ª–µ–∫—Å–µ–π –°–∞–Ω–¥–∞–Ω–æ–≤–∏—á', gender: '–º', birth: '05.07.1961', description: '–ë—Ä–∞—Ç', motherId: 'f2', fatherId: 'f1', generation: 4, info: { work: '–ó–∞–≤—É—á —Å–ø–æ—Ä—Ç —à–∫–æ–ª—ã' } },
            { id: 'me10', name: '–°–∞–Ω—á–∞—Ç –û–ª—å–≥–∞ –°–∞–Ω–¥–∞–Ω–æ–≤–Ω–∞', gender: '–∂', birth: '25.08.1963', description: '–°–µ—Å—Ç—Ä–∞', motherId: 'f2', fatherId: 'f1', generation: 4, info: { work: '–ø—Ä–æ–¥–∞–≤–µ—Ü' } },

            // –¥–µ—Ç–∏ –ú–∞–Ω—á–∞–ª–º–∞–∞ (–ø–ª–µ–º—è–Ω–Ω–∏–∫–∏/–ø–ª–µ–º—è–Ω–Ω–∏—Ü—ã –æ—Ç—Ü–∞)
            { id: 'c1', name: '–ú–æ–Ω–≥–∞–ª –ú”©–Ω–≥–µ', gender: '–º', birth: '30.04.1937', description: '–°—ã–Ω –ú–∞–Ω—á–∞–ª–º–∞–∞', motherId: 'u2', fatherId: 'u3', generation: 4, info: { doc: '–†–≠ ‚Ññ101251, –∑–∞–ø–∏—Å—å 18.09.1945 –∫–Ω.1 ‚Ññ23' } },
            { id: 'c2', name: '–ú–æ–Ω–≥–∞–ª –ï–ª–∏–∑–∞–≤–µ—Ç–∞', gender: '–∂', birth: '30.04.1941', description: '–î–æ—á—å –ú–∞–Ω—á–∞–ª–º–∞–∞', motherId: 'u2', fatherId: 'u3', generation: 4, info: { doc: '–†–≠ ‚Ññ101252, –ø–æ–≤—Ç–æ—Ä –©–ò030383' } },
            { id: 'c3', name: '–ú–æ–Ω–≥–∞–ª –î–∏–∏–∑–µ–Ω–º–∞–∞', gender: '–∂', birth: '08.08.1944', description: '–î–æ—á—å –ú–∞–Ω—á–∞–ª–º–∞–∞', motherId: 'u2', fatherId: 'u3', generation: 4, info: { birthplace: '“Æ-–®—ã–Ω–∞–∞' } },

            // 5 –ü–û–ö–û–õ–ï–ù–ò–ï (–¥–µ—Ç–∏ –ï–ª–∏–∑–∞–≤–µ—Ç—ã –ú–æ–Ω–≥–∞–ª –∏ –¥—Ä—É–≥–∏–µ –≤–Ω—É–∫–∏)
            { id: 'gc1', name: '–ö—É–Ω–∑–µ–∫ –í–ª–∞–¥–∏–º–∏—Ä –í–∏–∫—Ç–æ—Ä–æ–≤–∏—á', gender: '–º', birth: '1965', description: '–°—ã–Ω –ï–ª–∏–∑–∞–≤–µ—Ç—ã', motherId: 'c2', fatherId: null, generation: 5, info: {} },
            { id: 'gc2', name: '–ö—É–Ω–∑–µ–∫ –í–∞–¥–∏–º –í–∏–∫—Ç–æ—Ä–æ–≤–∏—á', gender: '–º', birth: '1967', description: '–°—ã–Ω –ï–ª–∏–∑–∞–≤–µ—Ç—ã', motherId: 'c2', fatherId: null, generation: 5, info: {} },
            { id: 'gc3', name: '–°–∞–Ω–¥—ã–π-–æ–æ–ª –ê–π–Ω–∞—à –í–∏–∫—Ç–æ—Ä–æ–≤–Ω–∞', gender: '–∂', birth: '1971', description: '–î–æ—á—å –ï–ª–∏–∑–∞–≤–µ—Ç—ã', motherId: 'c2', fatherId: null, generation: 5, info: {} },
            { id: 'gc4', name: '–ö—É–Ω–∑–µ–∫ –ê—è—Å –í–∏–∫—Ç–æ—Ä–æ–≤–∏—á', gender: '–º', birth: '1973', description: '–°—ã–Ω –ï–ª–∏–∑–∞–≤–µ—Ç—ã', motherId: 'c2', fatherId: null, generation: 5, info: {} },
            // –°—É–ø—Ä—É–≥–∏ –∏ –¥–µ—Ç–∏ –í–∞–¥–∏–º–∞ (–ø–æ–∫–æ–ª–µ–Ω–∏–µ 5-6)
            { id: 'gc5', name: '–ö—É–Ω–∑–µ–∫ –ó–∞—Ä–∏–Ω–∞ –ú–∞–∞–¥—ã—Ä–æ–≤–Ω–∞', gender: '–∂', birth: '', description: '–ñ–µ–Ω–∞ –í–∞–¥–∏–º–∞', motherId: null, fatherId: null, generation: 5, info: {} },
            { id: 'gc6', name: '–ö—É–Ω–∑–µ–∫ –ë–∞–π—ã—Ä-–ë–µ–ª–µ–∫ –í–∏–∫—Ç–æ—Ä–æ–≤–∏—á', gender: '–º', birth: '1990', description: '–°—ã–Ω –í–∞–¥–∏–º–∞', motherId: 'gc5', fatherId: 'gc2', generation: 6, info: {} },
            { id: 'gc7', name: '–ß—É–¥–∞–∫ –î–∞—è–Ω–∞ –í–∞–¥–∏–º–æ–≤–Ω–∞', gender: '–∂', birth: '1998', description: '–î–æ—á—å –í–∞–¥–∏–º–∞', motherId: 'gc5', fatherId: 'gc2', generation: 6, info: {} },
            { id: 'gc8', name: '–°–∞–Ω–¥—ã–π-–æ–æ–ª –ê–Ω–¥—Ä–µ–π –ê–Ω–∞—Ç–æ–ª—å–µ–≤–∏—á', gender: '–º', birth: '', description: '–ú—É–∂ –ê–π–Ω–∞—à', motherId: null, fatherId: null, generation: 5, info: {} },
            { id: 'gc9', name: '–°–∞–Ω–¥—ã–π-–æ–æ–ª –ò—Ä–∏–Ω–∞ –ê–Ω–¥—Ä–µ–µ–≤–Ω–∞', gender: '–∂', birth: '1996', description: '–î–æ—á—å –ê–π–Ω–∞—à', motherId: 'gc3', fatherId: 'gc8', generation: 6, info: {} },
            { id: 'gc10', name: '–°–∞–Ω–¥—ã–π-–æ–æ–ª –ò–≥–æ—Ä—å –ê–Ω–¥—Ä–µ–µ–≤–∏—á', gender: '–º', birth: '2004', description: '–°—ã–Ω –ê–π–Ω–∞—à', motherId: 'gc3', fatherId: 'gc8', generation: 6, info: {} },
        ];

        // –°–ª–æ–≤–∞—Ä—å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
        const peopleMap = {};
        people.forEach(p => peopleMap[p.id] = p);

        // –£—Å—Ç–∞–Ω–æ–≤–∏–º spouse —Å–≤—è–∑–∏ –∏ –¥–æ–ø. —Ä–æ–¥–∏—Ç–µ–ª–µ–π –≥–¥–µ –Ω—É–∂–Ω–æ (–≤—Ä—É—á–Ω—É—é –Ω–µ –æ–ø–∏—Å–∞–Ω–æ, –æ—Å—Ç–∞–≤–∏–º –Ω–∞ –æ–±—â–µ–µ –¥—Ä–µ–≤–æ)

        // ==================== –û–¢–†–ò–°–û–í–ö–ê –î–ï–†–ï–í–ê ====================
        const canvas = document.getElementById('treeCanvas');
        const infoDiv = document.getElementById('personInfo');
        let activePersonId = null;

        function renderTree() {
            const generations = [1,2,3,4,5,6];
            let html = '';
            generations.forEach(gen => {
                const personsThisGen = people.filter(p => p.generation === gen);
                if (personsThisGen.length === 0) return;
                html += `<div class="generation-row" data-gen="${gen}">`;
                html += `<span class="gen-label">–ü–æ–∫–æ–ª–µ–Ω–∏–µ ${gen}</span>`;
                personsThisGen.forEach(person => {
                    const years = person.birth ? `—Ä–æ–¥. ${person.birth}` : '';
                    const genderSymbol = person.gender === '–º' ? 'üë§' : 'üë©';
                    html += `
                        <div class="person-node" data-id="${person.id}" id="node-${person.id}">
                            <div class="photo-placeholder" style="float:left;"></div>
                            <div class="person-name">${genderSymbol} ${person.name}</div>
                            <div class="person-years">${years}</div>
                            <div class="person-relation">${person.description || ''}</div>
                        </div>
                    `;
                });
                html += `</div>`;
                // –î–æ–±–∞–≤–∏–º –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–∏—Ç–µ–ª–∏ –º–µ–∂–¥—É –ø–æ–∫–æ–ª–µ–Ω–∏—è–º–∏ (–ø—Ä–æ—Å—Ç–æ —Å–∏–º–≤–æ–ª)
                if (gen < 6) html += `<div class="edge-marker"><span></span></div>`;
            });
            canvas.innerHTML = html;

            // –ù–∞–≤–µ—Å–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∏–∫–æ–≤
            document.querySelectorAll('.person-node').forEach(node => {
                node.addEventListener('click', (e) => {
                    const id = node.dataset.id;
                    setActivePerson(id);
                });
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –ø—Ä–µ–¥–∫–æ–≤ –∏ –ø–æ—Ç–æ–º–∫–æ–≤
        function highlightRelatives(activeId) {
            // –°–±—Ä–æ—Å –≤—Å–µ—Ö –∫–ª–∞—Å—Å–æ–≤
            document.querySelectorAll('.person-node').forEach(n => {
                n.classList.remove('active', 'highlight-ancestor', 'highlight-descendant');
            });

            if (!activeId) return;

            const activeNode = document.getElementById(`node-${activeId}`);
            if (activeNode) activeNode.classList.add('active');

            // –°–æ–±—Ä–∞—Ç—å –≤—Å–µ—Ö –ø—Ä–µ–¥–∫–æ–≤ –∏ –ø–æ—Ç–æ–º–∫–æ–≤
            const ancestors = new Set();
            const descendants = new Set();

            function findAncestors(id) {
                const p = peopleMap[id];
                if (!p) return;
                if (p.fatherId) { ancestors.add(p.fatherId); findAncestors(p.fatherId); }
                if (p.motherId) { ancestors.add(p.motherId); findAncestors(p.motherId); }
            }

            function findDescendants(id) {
                people.forEach(p => {
                    if (p.fatherId === id || p.motherId === id) {
                        descendants.add(p.id);
                        findDescendants(p.id);
                    }
                });
            }

            findAncestors(activeId);
            findDescendants(activeId);

            ancestors.forEach(id => {
                const el = document.getElementById(`node-${id}`);
                if (el) el.classList.add('highlight-ancestor');
            });
            descendants.forEach(id => {
                const el = document.getElementById(`node-${id}`);
                if (el) el.classList.add('highlight-descendant');
            });
        }

        function setActivePerson(id) {
            activePersonId = id;
            highlightRelatives(id);
            updateInfoPanel(id);
        }

        function updateInfoPanel(id) {
            const person = peopleMap[id];
            if (!person) return;

            let photoHtml = `<div class="info-photo" id="infoPhotoPlace">üì∏ –§–æ—Ç–æ: ${person.name}</div>`;
            // –ú–µ—Å—Ç–æ –¥–ª—è –±—É–¥—É—â–µ–≥–æ —Ñ–æ—Ç–æ: –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ <img src="...">
            let details = `
                <div class="info-field"><strong>–ü–æ–ª–Ω–æ–µ –∏–º—è</strong>${person.name}</div>
                <div class="info-field"><strong>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</strong>${person.birth || '–Ω–µ —É–∫–∞–∑–∞–Ω–∞'}</div>
                <div class="info-field"><strong>–†–æ–ª—å</strong>${person.description || ''}</div>
            `;

            if (person.info) {
                if (person.info.birthplace) details += `<div class="info-field"><strong>–ú–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è</strong>${person.info.birthplace}</div>`;
                if (person.info.doc) details += `<div class="info-field"><strong>–î–æ–∫—É–º–µ–Ω—Ç / –∑–∞–ø–∏—Å—å</strong>${person.info.doc}</div>`;
                if (person.info.work) details += `<div class="info-field"><strong>–ó–∞–Ω—è—Ç–æ—Å—Ç—å</strong>${person.info.work}</div>`;
                if (person.info.parents) details += `<div class="info-field"><strong>–†–æ–¥–∏—Ç–µ–ª–∏ (–ø–æ –∑–∞–ø–∏—Å–∏)</strong>${person.info.parents}</div>`;
                if (person.info.note) details += `<div class="info-field"><strong>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ</strong>${person.info.note}</div>`;
            }

            // —Ä–æ–¥–∏—Ç–µ–ª–∏ –∏–∑ —Å–≤—è–∑–µ–π
            let parentsStr = [];
            if (person.fatherId && peopleMap[person.fatherId]) parentsStr.push(peopleMap[person.fatherId].name);
            if (person.motherId && peopleMap[person.motherId]) parentsStr.push(peopleMap[person.motherId].name);
            if (parentsStr.length) details += `<div class="info-field"><strong>–†–æ–¥–∏—Ç–µ–ª–∏ –≤ –¥—Ä–µ–≤–µ</strong>${parentsStr.join(' & ')}</div>`;

            infoDiv.innerHTML = photoHtml + details;
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        renderTree();
        // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–∫–∞–∂–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–µ–±–µ
        setTimeout(() => {
            const me = people.find(p => p.id === 'me8');
            if (me) setActivePerson(me.id);
        }, 100);

        // –î–æ–±–∞–≤–∏–º –ø—Ä–æ—Å—Ç—É—é –∞–¥–∞–ø—Ç–∞—Ü–∏—é –¥–ª—è —Ñ–æ—Ç–æ (–∑–∞–≥–ª—É—à–∫–∞)
    })();
</script>
<!-- –ø–æ—è—Å–Ω–µ–Ω–∏–µ: –¥–ª—è —Ñ–æ—Ç–æ –∑–∞–º–µ–Ω–∏—Ç–µ background –∏ –≤—Å—Ç–∞–≤—å—Ç–µ <img> –µ—Å–ª–∏ –Ω—É–∂–Ω–æ, –≤ info-photo -->
</body>
</html>
